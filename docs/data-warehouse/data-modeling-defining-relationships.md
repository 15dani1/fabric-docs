---
title: Data modeling and defining relationships
description: Learn how to model your data and define physical and logical relationships.
ms.reviewer: wiassaf
ms.author: salilkanade
author: cynotebo
ms.topic: conceptual
ms.date: 03/15/2023
---

# Data modeling and defining relationships

[!INCLUDE [preview-note](../includes/preview-note.md)]

A well-defined data model is instrumental in driving your analytics and reporting experiences. In [!INCLUDE [product-name](../includes/product-name.md)] warehouse, we’re providing you with a way to easily build and change your data model with a few simple clicks in our visual editor. You need to have at least a small sample of data loaded before you can explore these concepts further; tables may be empty, but the schemas (their structures) need to be defined.

## How to model data and define relationships

*Applies to:* Warehouse and SQL Endpoint

To model your data, navigate to **Model view** by selecting the **Model view** icon at the bottom left of the window, as shown in the following image.

:::image type="content" source="media\data-modeling-defining-relationships\model-view-icon.png" alt-text="Screenshot of the model view icon." lightbox="media\data-modeling-defining-relationships\model-view-icon.png":::

In the model view, users can model their warehouse and the canonical autogenerated “default” dataset. We recommend modeling your data warehouse using Kimball methodologies, using a star schema, wherever possible. There are two types of modeling possible:

1. Warehouse modeling - the physical relationships expressed as primary and foreign keys and constraints

1. Default dataset modeling - the logical relationships expressed between entities

Modeling automatically keeps these definitions in sync, enabling powerful warehouse and semantic layer development simultaneously.

### Model the warehouse

Modeling the warehouse is possible by setting primary and foreign key constraints and setting identity columns on the model view within the data warehouse UX. After you navigate the model view, you can do this in a visual entity relationship diagram that allows a user to drag and drop tables to infer how the objects relate to one another. Lines visually connecting the entities infer the type of physical relationships that exist.

### Define physical and logical relationships

1. To create a logical relationship between entities in a warehouse and the resulting primary and foreign key constraints, select the **Model view** and select your warehouse, then drag the column from one table to the column on the other table to initiate the relationship. In the window that appears, configure the relationship properties.

   :::image type="content" source="media\data-modeling-defining-relationships\create-relationship.png" alt-text="Screenshot of the Create Relationship screen." lightbox="media\data-modeling-defining-relationships\create-relationship.png":::

1. Select the **Confirm** button when your relationship is complete to save the relationship information. The relationship set will effectively:
   1. Set the physical relationships - primary and foreign key constraints in the database
   1. Set the logical relationships - primary and foreign key constraints in the default dataset

### Editing relationships using different methods

Using drag and drop and the associated **Edit relationships dialog** is a more guided experience for editing relationships in Power BI.

In contrast, editing relationships in the **Properties** pane is a streamlined approach to editing relationships:

:::image type="content" source="media\data-modeling-defining-relationships\edit-relationship-properties-pane.png" alt-text="Screenshot of the Properties pane." lightbox="media\data-modeling-defining-relationships\edit-relationship-properties-pane.png":::

You only see the table names and columns from which you can choose, you aren't presented with a data preview, and the relationship choices you make are only validated when you select **Apply changes**. Using the **Properties** pane and its streamlined approach reduces the number of queries generated when editing a relationship, which can be important for big data scenarios, especially when using DirectQuery connections. Relationships created using the **Properties** pane can also use multi-select relationships in the **Model** view diagram layouts. Pressing the **Ctrl** key and select more than one line to select multiple relationships. Common properties can be edited in the **Properties** pane and **Apply changes** processes the changes in one transaction.

Single or multi-selected relationships can also be deleted by pressing **Delete** on your keyboard. You can't undo the delete action, so a dialog prompts you to confirm deleting the relationships.

## Modeling the default dataset

The default dataset inherits all relationships between entities defined in the model view and infers them as Power BI dataset relationships, when objects are enabled for BI (Power BI Reports). Inheriting the warehouse’s business logic allows a warehouse developer or BI analyst to decrease the time to value towards building a useful semantic model and metrics layer for analytical business intelligence (BI) reports in Power BI, Excel, or external tools like Tableau that read the XMLA format.

While all constraints are translated to relationships, currently in Power BI, only one relationship can be active at a time, whereas multiple primary and foreign key constraints can be defined for warehouse entities and are shown visually in the diagram lines. The active Power BI relationship is represented with a solid line and the rest is represented with a dotted line. We recommend choosing the primary relationship as active for BI reporting purposes.

The following table provides a description of the properties available when using the model view diagram and creating relationships:

| **Column name** | **Description** |
|---|---|
| **FromObjectName** | Table/View name "From" which relationship is defined. |
| **ToObjectName** | Table/View name "To" which a relationship is defined. |
| **TypeOfRelationship** | Relationship cardinality, the possible values are: None, OneToOne, OneToMany, ManyToOne, and ManyToMany. |
| **SecurityFilteringBehavior** | Indicates how relationships influence filtering of data when evaluating row-level security expressions and is a Power BI specific semantic. The possible values are: OneDirection, BothDirections, and None. |
| **IsActive** | A Power BI specific semantic, and a boolean value that indicates whether the relationship is marked as Active or Inactive. This defines the default relationship behavior within the semantic model |
| **RelyOnReferentialIntegrity** | A boolean value that indicates whether the relationship can rely on referential integrity or not. |
| **CrossFilteringBehavior** | Indicates how relationships influence filtering of data and is Power BI specific. The possible values are: 1 - OneDirection, 2 - BothDirections, and 3 - Automatic. |

## Using model view layouts

During the session, users may create multiple tabs in the model view to depict say, data warehouse schemas or further assist with database design. Currently the model view layouts are only persisted in session. However the database changes are persisted. Users can use the auto-layout whenever a new tab is created to visually inspect the database design and understand the modeling.

## Adding or removing objects to the default dataset

In Power BI, a dataset is always required before any reports can be built, so the default dataset enables quick reporting capabilities on top of the warehouse. Within the warehouse, a user can add warehouse objects - tables or views to their default dataset. They can also add other semantic modeling properties, such as hierarchies and descriptions. These properties are then used to create the Power BI dataset’s tables. Users can also remove objects from the default dataset.

To add objects such as tables or views to the default dataset, you have options:

1. Automatically add objects to the dataset, which happens by default with no user intervention needed.

1. Manually add objects to the dataset.

The auto detect experience determines any tables or views and opportunistically adds them.

The manually detect option in the ribbon allows fine grained control of which object(s), such as tables and/or views, should be added to the default dataset:

- Select all
- Filter for tables or views
- Select specific objects

To remove objects, a user can use the manually select button in the ribbon and:

- Un-select all
- Filter for tables or views
- Un-select specific objects

> [!TIP]
> We recommend reviewing the objects enabled for BI and ensuring they have the correct logical relationships to ensure a smooth downstream reporting experience.

## Next steps

- [Create a measure](create-measure.md)
